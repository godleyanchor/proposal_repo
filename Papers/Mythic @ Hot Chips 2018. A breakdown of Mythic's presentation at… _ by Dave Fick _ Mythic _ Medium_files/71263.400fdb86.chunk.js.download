(self.webpackChunklite=self.webpackChunklite||[]).push([[71263],{25538:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var i=t(67294);function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var a=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.11 12.23l-5.2-5.76L9.48 6l-.42.47-5.16 5.7.85.77L9.48 7.7 14.26 13l.85-.77z",fill:"#292929"});const o=function(e){return i.createElement("svg",r({width:19,height:19,viewBox:"0 0 19 19",fill:"none"},e),a)}},76972:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var i=t(59910),r=t(13882),a=36e5;function o(e,n){(0,r.Z)(2,arguments);var t=(0,i.Z)(e,n)/a;return t>0?Math.floor(t):Math.ceil(t)}},38125:(e,n,t)=>{var i=t(14259);e.exports=function(e){return null!=e&&e.length?i(e,0,-1):[]}},18029:(e,n,t)=>{var i=t(35393),r=t(11700),a=i((function(e,n,t){return e+(t?" ":"")+r(n)}));e.exports=a},60918:(e,n,t)=>{"use strict";t.d(n,{i:()=>s});var i=t(319),r=t.n(i),a=t(68216),o=t(32934),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostJsonLd_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoTitle"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"logo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}}]}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"updatedAt"}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"shortformType"}},{kind:"Field",name:{kind:"Name",value:"structuredData"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleForPost_post"}}]}}].concat(r()(a.$m.definitions),r()(o.bq.definitions))},d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"postMetaDescription_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoDescription"}},{kind:"Field",name:{kind:"Name",value:"metaDescription"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}}]}}].concat(r()(o.bh.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"shortformPostMetaDescription_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"metaDescription"}},{kind:"Field",name:{kind:"Name",value:"seoDescription"}},{kind:"Field",name:{kind:"Name",value:"shortformType"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}}]}}].concat(r()(o.bh.definitions))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostMetadata_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"socialTitle"}},{kind:"Field",name:{kind:"Name",value:"socialDek"}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"Field",name:{kind:"Name",value:"curationStatus"}},{kind:"Field",name:{kind:"Name",value:"canonicalUrl"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"metaDescription"}},{kind:"Field",name:{kind:"Name",value:"latestPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"isLimitedState"}},{kind:"Field",name:{kind:"Name",value:"readingTime"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"twitterScreenName"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"twitterUsername"}},{kind:"Field",name:{kind:"Name",value:"facebookPageId"}}]}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}}]}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"Field",name:{kind:"Name",value:"curationStatus"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostJsonLd_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"postMetaDescription_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shortformPostMetaDescription_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shouldIndexPost_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shortformPostTitle_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleDetails_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleForPost_post"}}]}}].concat(r()(a.$m.definitions),r()(l.definitions),r()(d.definitions),r()(c.definitions),r()(o.HF.definitions),r()(o.Pz.definitions),r()(o.dm.definitions),r()(o.bq.definitions))}},8459:(e,n,t)=>{"use strict";t.d(n,{T:()=>d});var i=t(67294),r=t(77355),a=t(96370),o=t(29746),l=t(52546),d=function(e){var n=e.isDockingEnabled,t=void 0!==n&&n,d=e.undockedBackgroundColor,c=e.maxWidthSize,s=void 0===c?"inset":c,u=e.children,m=(0,l.$)(t),p=m.dockRef,g=m.markerRef,v=m.isStuck;return i.createElement(i.Fragment,null,i.createElement(r.x,{ref:g}),i.createElement(r.x,{tag:"footer",ref:p,display:"flex",alignItems:"center",boxSizing:"content-box",height:(0,o.a)(52),maxHeight:(0,o.a)(52),zIndex:"1",position:t?{xs:"static",sm:"static",md:"sticky",lg:"sticky",xl:"sticky"}:"static",bottom:t?{xs:void 0,sm:void 0,md:"0",lg:"0",xl:"0"}:void 0,backgroundColor:v?"BACKGROUND":d,borderTop:v?{xs:"NONE",sm:"NONE",md:"BASE_LIGHTER",lg:"BASE_LIGHTER",xl:"BASE_LIGHTER"}:"NONE"},i.createElement(r.x,{flexGrow:"1"},i.createElement(a.P,{size:s},u))))}},52546:(e,n,t)=>{"use strict";t.d(n,{$:()=>l});var i=t(63038),r=t.n(i),a=t(67294),o=t(34135),l=function(e){var n=(0,a.useRef)(null),t=(0,a.useRef)(null),i=(0,a.useState)(!1),l=r()(i,2),d=l[0],c=l[1];return(0,a.useEffect)((function(){var i=function(){var e,i,r=null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect().y,a=null===(i=t.current)||void 0===i?void 0:i.getBoundingClientRect().y;r&&a&&c(Boolean(a-r))};if(i(),e)return o.V6.on("scroll",i),function(){o.V6.off("scroll",i)}}),[e]),{isStuck:e&&d,dockRef:n,markerRef:t}}},34287:(e,n,t)=>{"use strict";t.d(n,{i:()=>i,P:()=>r});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"buildBranchViewData_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"layerCake"}},{kind:"Field",name:{kind:"Name",value:"primaryTopic"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}}]}}]}}]},r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"buildBranchViewData_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postIds"}}]}}]}},34492:(e,n,t)=>{"use strict";t.d(n,{I:()=>p});var i,r=t(59713),a=t.n(r),o=t(67294);!function(e){e.S="S",e.L="L"}(i||(i={}));var l=t(77355),d=t(9935),c=t(87691),s=t(14646),u=t(97489),m=t(14804),p=function(e){var n=e.children,t=e.scale,r=void 0===t?i.L:t,p=e.alpha,g=void 0===p?.05:p,v=e.verticalMargins,f=void 0===v?{normal:"24px",small:"24px"}:v,k=e.horizontalMargins,h=void 0===k?{normal:"-16px",small:"-12px 0"}:k,S=e.dismissable,y=e.onClick,E=e.maxWidth,b=void 0===E?"740px":E,x=(0,s.I)();return o.createElement("div",{className:x((function(e){return a()({background:(0,m.Uy)(g),borderRadius:"4px",margin:"".concat(f.small," ").concat(h.small),position:"relative"},u.xl(e),{margin:"".concat(f.normal," ").concat(h.normal)})}))},o.createElement(l.x,{display:"flex",justifyContent:"space-between",maxWidth:b,padding:"16px",sm:{padding:"12px"}},o.createElement(c.F,{scale:r,color:"DARKER"},n),S&&y&&o.createElement(d.P,{onClick:y,size:"REGULAR",isPositionAbsolute:!1,compensateInnerPadding:!0,"data-testid":"close-button"})))}},20512:(e,n,t)=>{"use strict";t.d(n,{Y4:()=>l,NJ:()=>d,lc:()=>c});var i=t(59713),r=t.n(i),a=t(46696);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){var n=e.miroId,t=e.originalWidth,i=e.originalHeight,r=e.focusPercentX,o=e.focusPercentY,l=e.croppedWidth;if(!n)return null;var d=(0,a.vz)({miroId:n,aspectRatio:16/9,croppedWidth:l,originalWidth:t,originalHeight:i,focusPercentX:r,focusPercentY:o}),c=(0,a.vz)({miroId:n,aspectRatio:4/3,croppedWidth:l,originalWidth:t,originalHeight:i,focusPercentX:r,focusPercentY:o}),s=(0,a.vz)({miroId:n,aspectRatio:1,croppedWidth:l,originalWidth:t,originalHeight:i,focusPercentX:r,focusPercentY:o}),u=new Set([d,c,s]);return Array.from(u)}function d(e){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({"@type":"ImageObject"},e)}function c(e){var n=e.id,t=e.originalWidth,i=e.originalHeight;if(!n||!t||!i)return null;var r=Math.min(i,60),o=r/i,l=Math.floor(t*o);return d({width:l,height:r,url:(0,a.W6)({miroId:n,width:l,freezeGifs:!0,strategy:a._S.Resample})})}},58098:(e,n,t)=>{"use strict";t.d(n,{rh:()=>z});var i=t(28655),r=t.n(i),a=t(50008),o=t.n(a),l=t(63038),d=t.n(l),c=t(71439),s=t(67294),u=t(12291),m=t(23450),p=t.n(m),g=t(34492),v=t(77355),f=function(e){var n=e.link,t=e.text,i=e.verticalMargins;return s.createElement(g.I,{verticalMargins:i},t," ",s.createElement(v.x,{display:"inline",whiteSpace:"nowrap"},n))},k=t(36405),h=t(6443),S=t(28451),y=t(43822),E=t(18627),b=t(66411),x=t(90924),w=t(43487),N=t(50458);function P(){var e=r()(["\n  fragment LIHighlightMeter_post on Post {\n    id\n    ...UpsellClickable_post\n  }\n  ","\n"]);return P=function(){return e},e}var I=function(e){var n=e.meterCount,t=e.meterLimit,i=e.post,r=(0,h.H)().value,a=(0,E.Av)(),o=null==r?void 0:r.isMembershipTrialEligible,l=!(!(0,k.P5)("enable_trial_upsell")||!o);s.useEffect((function(){a.event("meter.viewed",{uiType:S.j.LIHighlightCTA,postId:i.id,meterCount:n,userId:null==r?void 0:r.id}),o&&a.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[]);var d,c=(0,w.v9)((function(e){return e.config.authDomain})),u=s.createElement(x.M,{tag:"span"},s.createElement(y.a,{linkStyle:"OBVIOUS",post:i,inline:!0,redirectUrl:(0,N.c5p)(c)},l?"Start your free trial":"Upgrade for unlimited access."));return s.createElement(b.cW,{source:{dimension:"post_counter",name:"upgrade_membership",postId:i.id}},s.createElement(f,{text:(d=t-n,d<=0?s.createElement(s.Fragment,null,"This is your ",s.createElement("b",null,"last")," free member-only story this month."):s.createElement(s.Fragment,null,"You have ",s.createElement("b",null,d)," free member-only ",p()("story",d)," left this month.")),link:u}))},F=(0,c.Ps)(P(),y.H),_=t(26350);function O(){var e=r()(["\n  fragment LOHighlightMeter_post on Post {\n    id\n  }\n"]);return O=function(){return e},e}var C=function(e){switch(e){case 1:return s.createElement(s.Fragment,null,"You have ",s.createElement("b",null,"2")," free member-only stories left this month.");case 2:return s.createElement(s.Fragment,null,"You have ",s.createElement("b",null,"1")," free member-only story left this month.");case 3:return s.createElement(s.Fragment,null,"This is your ",s.createElement("b",null,"last")," free member-only story this month.");default:return s.createElement(s.Fragment,null,"You've read all your free member-only stories this month.")}},D=function(e){var n=e.meterCount,t=e.post,i=(0,w.v9)((function(e){return e.config.productName})),r=function(e){switch(e){case 3:return"metered_view_3";case 2:return"metered_view_2";case 1:default:return"smart_meter"}}(n),a=(0,E.Av)();s.useEffect((function(){a.event("meter.viewed",{uiType:S.j.LOHighlightCTA,postId:t.id,meterCount:n})}),[]);var o=s.createElement(_.R9,{linkStyle:"OBVIOUS",inline:!0,operation:"register",susiEntry:r},"Sign up for ".concat(i," and get an extra one"));return s.createElement(b.cW,{source:{postId:t.id}},s.createElement(f,{text:C(n),link:o,verticalMargins:{normal:"24px",small:"16px"}}))},T=(0,c.Ps)(O()),A=t(52602),R=t(59626),L=t(14646),M=t(80872),j=t(54712),U=t(98067);function B(){var e=r()(["\n  fragment MeterController_meteringInfo on MeteringInfo {\n    postIds\n    maxUnlockCount\n  }\n"]);return B=function(){return e},e}function W(){var e=r()(["\n  fragment MeterController_post on Post {\n    creator {\n      id\n    }\n    isLocked\n    lockedSource\n    ...LIHighlightMeter_post\n    ...LOHighlightMeter_post\n    ...SusiContainer_post\n  }\n  ","\n  ","\n  ","\n"]);return W=function(){return e},e}var V=function(e){var n=e.meteringInfo,t=e.post,i=e.viewer,r=s.useState(!1),a=d()(r,2),o=a[0],l=a[1],c=n.maxUnlockCount||3,u=n.postIds.length;return u<=c?(0,M.sy)()&&(0,A.Dk)(i)?((0,M.Of)(),null):(o||l(!0),s.createElement(I,{meterCount:u,post:t,meterLimit:c})):null},H=function(e){var n=e.meterCount,t=e.post,i=s.useState(!1),r=d()(i,2),a=r[0],o=r[1];switch(n){case 1:case 2:case 3:return a||o(!0),s.createElement(D,{meterCount:n,post:t});default:return null}},z=function(e){var n=e.meteringInfo,t=e.post,i=(0,u.I0)(),r=(0,L.I)(),a=(0,j.xg)(),l=s.useState(!1),c=d()(l,2),m=c[0],p=c[1];s.useEffect((function(){void 0!==("undefined"==typeof document?"undefined":o()(document))&&p(!0),i((0,U.Dl)(!1))}),[]);var g=(0,h.H)(),v=g.loading,f=g.error,k=g.value;if(v||f)return s.createElement(s.Fragment,null);var S=k&&k.mediumMemberAt||void 0,y=t&&t.creator&&t.creator.id||void 0,E=k&&k.id||void 0,b=k?S||y===E:"LOCKED_POST_SOURCE_SYNDICATED"===t.lockedSource,x=!m||!t.isLocked||!n.postIds.includes(t.id)||b,w=m&&!x,N={height:w?"100%":"0px",overflow:w?"inherit":"hidden",transition:"height 2s cubic-bezier(0.23, 1, 0.32, 1) 0s"},P=k?s.createElement(V,{meteringInfo:n,post:t,viewer:k}):s.createElement(H,{meterCount:n.postIds.length,post:t});return s.createElement("div",{className:a?r(N):void 0},!x&&P)};(0,c.Ps)(W(),F,T,R.qt),(0,c.Ps)(B())},8124:(e,n,t)=>{"use strict";t.d(n,{cu:()=>_e});var i=t(28655),r=t.n(i),a=t(71439),o=t(67294);function l(){var e=r()(["\n  fragment useShouldShowEntityDrivenSubscription_creator on User {\n    id\n  }\n"]);return l=function(){return e},e}var d=(0,a.Ps)(l()),c=t(72619);function s(){var e=r()(["\n  fragment MemberOnlyWall_post on Post {\n    id\n    creator {\n      id\n      name\n      username\n      ...useShouldShowEntityDrivenSubscription_creator\n      ...EntityDrivenSubscriptionLandingPageScreen_writer\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}var u=(0,a.Ps)(s(),d,c._k),m=t(63038),p=t.n(m),g=t(12291),v=t(46829),f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorsDropdownQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userViewedPartnerProgramCreators"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}}]}}]}}]},k=t(84531),h=t(77355);function S(e){var n=e.alt,t=e.diameter1,i=e.diameter2,r=e.diameter3,a=e.miroId1,l=e.miroId2,d=e.miroId3,c=e.freezeGifs;return o.createElement(o.Fragment,null,o.createElement(k.z,{alt:n,miroId:a,diameter:t,freezeGifs:c}),o.createElement(h.x,{paddingLeft:"2px",paddingTop:"2px",display:"flex",flexDirection:"column"},o.createElement(k.z,{alt:n,miroId:l,diameter:i,freezeGifs:c}),o.createElement(h.x,{paddingTop:"2px"},o.createElement(k.z,{alt:n,miroId:d,diameter:r,freezeGifs:c}))))}var y=t(38352),E=t(81281),b=t(66227),x=t(73917),w=t(47230),N=t(87691),P=t(18627),I=t(66411),F=t(14646),_=t(31889),O=t(99015),C=t(25538),D=t(87498),T="PAY_MULTIPLE_WRITERS_OPTION_ID",A=function(e){return{outline:"none",cursor:"pointer",background:e.accentColor.fill.normal,":hover":{background:e.accentColor.fill.dark}}},R=function(e){return{outline:"none",cursor:"pointer",":hover":{background:e.baseColor.background.light}}},L=[],M=function(e){var n,t,i=e.post,r=e.onSelect,a=(0,F.I)(),l=(0,_.F)(),d=(0,v.useQuery)(f,{ssr:!1}),c=d.error,s=d.data,u=d.loading,m=(0,P.Av)(),g=o.useState(null===(n=i.creator)||void 0===n?void 0:n.id),M=p()(g,2),j=M[0],U=M[1];if(!i.creator||c)return null;L=(null==s?void 0:s.userViewedPartnerProgramCreators.filter((function(e){var n;return(null==e?void 0:e.id)!==(null===(n=i.creator)||void 0===n?void 0:n.id)})).filter((function(e){return Boolean(e)})))||[],i.creator&&L.unshift({id:i.creator.id,name:i.creator.name,imageId:i.creator.imageId}),L.splice(5,0,{id:T,name:"quality writing",imageId:null});var B=null!==(t=i.creator.imageId)&&void 0!==t?t:D.gG,W=function(e){return j===e?"WHITE":"DARKER"},V=o.createElement(h.x,{width:"330px"},o.createElement(y.mX,{padding:"0"},o.createElement(h.x,null,L.slice(0,6).filter((function(e){return null!=e})).map((function(e,n){var t,l,d,c;return o.createElement(I.cW,{key:"creator-".concat(e.id),source:{index:n},extendSource:!0},o.createElement("div",{className:a((c=e.id,j===c?A:R)),onClick:function(){return function(e){var n,t;r(e),U(e.id),e.id===T?m.event("paywallDropdown.allCreatorsOptionSelected",{defaultCreatorId:null==i||null===(n=i.creator)||void 0===n?void 0:n.id}):m.event("paywallDropdown.creatorSelected",{defaultCreatorId:null==i||null===(t=i.creator)||void 0===t?void 0:t.id,selectedCreatorId:e.id})}(e)},"aria-hidden":"true","data-testid":"creator-item"},o.createElement(y.Sl,null,e.id!==T?o.createElement(h.x,{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},o.createElement(k.z,{miroId:e.imageId||"",alt:e.name||"",diameter:32,freezeGifs:!1}),o.createElement(h.x,{paddingLeft:"21px"},o.createElement(N.F,{scale:"L",color:W(e.id)},e.name))):o.createElement(h.x,{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},o.createElement(S,{miroId1:(null===(t=L[0])||void 0===t?void 0:t.imageId)||B,miroId2:(null===(l=L[1])||void 0===l?void 0:l.imageId)||B,miroId3:(null===(d=L[2])||void 0===d?void 0:d.imageId)||B,alt:"Pay multiple writers",diameter1:21,diameter2:12,diameter3:9,freezeGifs:!1}),o.createElement(h.x,{display:"inline-block",paddingLeft:"21px"},o.createElement(N.F,{tag:"span",scale:"L",color:W(e.id)},"Don't want to pick one writer?"),o.createElement(N.F,{tag:"span",scale:"S",color:W(e.id)},"Split your membership fee among writers you read"))))))}))),o.createElement(h.x,{padding:"8px 20px 0px 20px",ariaHidden:"true"},o.createElement(E.V,null)),o.createElement(h.x,{padding:"10px 20px 18px 20px"},o.createElement(N.F,{scale:"S",color:"LIGHTER"},"These are writers you read most, who are eligible to receive a portion of your membership fee via Medium’s Partner Program."))));return o.createElement(b.B,null,(function(e){var n=e.isVisible,t=e.toggle,r=e.hide;return o.createElement("div",{onClick:function(){var e;t(),n||m.event("paywallDropdown.clicked",{defaultCreatorId:null==i||null===(e=i.creator)||void 0===e?void 0:e.id})},"data-testid":"popover-button","aria-hidden":"true"},o.createElement(x.J,{isVisible:n,hide:r,flip:!0,popoverRenderFn:function(){return V},display:"flex",targetDistance:10},o.createElement(w.z,{width:"240px",buttonStyle:"SUBTLE",size:"REGULAR",loading:u},o.createElement(h.x,{display:"flex",justifyContent:"center"},o.createElement(N.F,{scale:"M",color:"DARKER"},"Support a different writer"),o.createElement(h.x,{paddingLeft:"4px"},n?o.createElement(C.Z,{fill:l.baseColor.text.lighter}):o.createElement(O.Z,{fill:l.baseColor.text.lighter}))))))}))},j=t(14804),U=/rgba\(([\d]+),\s*([\d]+),\s*([\d]+),\s*([\d]+|[\d]*.[\d]+)\)/,B=function(e){var n,t,i=e.children,r=(0,_.F)();return o.createElement(o.Fragment,null,o.createElement(h.x,{marginTop:"-240px",background:"linear-gradient(".concat((n=r.backgroundColor,t=n.match(U),t?"rgba(".concat(t[1],", ").concat(t[2],", ").concat(t[3],", 0)"):(0,j.l9)(0)),", ").concat(r.backgroundColor,")"),height:"250px",position:"relative",width:"100%"}),o.createElement(h.x,{backgroundColor:"BACKGROUND"},o.createElement(h.x,{margin:"auto",maxWidth:"760px",sm:{margin:"0 24px 0"}},i)))},W=t(25735),V=t(6443),H=t(25550),z=t(867),G=t(58670),Y=t(84157),q=t(54558),K=t(43822),$=t(8126),Q=t(90924),X=t(97171),Z=t(78285),J=t(43487),ee=t(17583),ne=t(78870),te=t(50458);function ie(){var e=r()(["\n  fragment PayWall_post on Post {\n    id\n    creator {\n      id\n      name\n      imageId\n      referredMembershipCustomHeadline\n      referredMembershipCustomBody\n    }\n  }\n"]);return ie=function(){return e},e}var re=function(e){var n,t=e.post,i=e.showTrialPaywall,r=e.authDomain,a=e.enablePaywallConversionsForReferredMembers,l=e.enableCreatorsDropdown,d=e.selectedCreatorId,c=(0,V.H)().value,s=t.creator&&t.creator.id,u=(0,te.c5p)(r),m=(0,P.Av)();n=l?(0,ne.Rk)((0,te.c5p)(r),{subscribeToUserId:d||"",susiEntry:"post_paywall"}):(0,ne.Rk)((0,te.c5p)(r),{subscribeToUserId:s||"",susiEntry:"post_paywall"});var p=a?n:u,g=o.useCallback((function(){m.event("paywall.upgradeClicked",{postId:null==t?void 0:t.id,userId:null==c?void 0:c.id})}),[t,null==c?void 0:c.id]);return o.createElement(I.cW,{source:{dimension:"post_limit",name:"upgrade_membership",postId:t.id}},o.createElement(Q.M,null,o.createElement(h.x,{display:"inline-block",textAlign:"center"},o.createElement(K.a,{isButton:!0,onClick:g,buttonStyle:i?"BRAND":"STRONG",width:l?"240px":i||c&&c.hasPastMemberships?"182px":"104px",redirectUrl:p},i?"Start your free trial":c&&c.hasPastMemberships?"Resume membership":"Upgrade"))))},ae=function(e){var n=e.declineSuggestedAccount,t=e.userSocialLogins,i=(0,g.I0)();return o.createElement(I.cW,{source:{susiEntry:"post_paywall"},extendSource:!0},o.createElement(h.x,{display:"flex",sm:{flexDirection:"column"}},o.createElement(h.x,{display:"flex",flexDirection:"row",justifyContent:"center"},t.facebook||t.google||t.twitter?o.createElement(G.r,{userSocialLogins:t}):o.createElement(z.o,{onSuccess:function(){return i((0,Z.Pc)({step:"CHECK_YOUR_INBOX",operation:"login",susiEntry:"post_paywall"}))},userId:t.userId},(function(e){var n=e.handleSubmit;return o.createElement(w.z,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:n},"Send login link")})))),n&&o.createElement(h.x,{marginTop:"10px",marginRight:"5px",sm:{marginTop:"20px"},display:"flex",justifyContent:"center",flexDirection:"column"},o.createElement(N.F,{scale:"M"},o.createElement(Y.G,{declineSuggestedAccount:n,isSocial:!!t&&!!(t.facebook||t.google||t.twitter)}))))},oe=function(e){var n=e.declineSuggestedAccount,t=e.userSocialLogins,i=e.suggestedAccountEventData,r=e.showSuggestedAccount,a=e.postId;return o.createElement(I.cW,{source:{dimension:"post_limit_suggestion",name:"upgrade_membership",postId:a}},o.createElement(Q.M,{eventData:i},o.createElement(h.x,{display:"inline-block",textAlign:"center"},o.createElement(ae,{declineSuggestedAccount:n,showSuggestedAccount:r,userSocialLogins:t}),o.createElement(h.x,{display:"flex",flexDirection:"row",marginTop:"10px",sm:{justifyContent:"center"}},o.createElement(N.F,{scale:"L"},o.createElement(K.a,{eventData:i,linkStyle:"OBVIOUS"},"Learn more about membership"))))))},le=function(e){var n=e.post,t=e.excludePadding,i=void 0!==t&&t,r=(0,J.v9)((function(e){return e.config.authDomain})),a=(0,J.v9)((function(e){return e.config.productName})),l=o.useState(n.creator),d=p()(l,2),c=d[0],s=d[1],u=(0,V.H)().value,m=(0,H.r)().viewerId,g=(0,P.Av)(),v=null==u?void 0:u.isMembershipTrialEligible,f=!(!(0,W.VB)({name:"enable_trial_upsell",placeholder:!1})||!v),S=(0,ee.s)(),y="xs"===S||"sm"===S,E=!!(0,W.VB)({name:"optimizely_holdback",placeholder:!1}),b="Your membership fee directly supports ".concat(n.creator&&n.creator.name," and other writers you read. You'll also get full access to every story on ").concat(a,"."),x=n.creator&&n.creator.referredMembershipCustomBody,w=!!(0,W.VB)({name:"enable_referred_membership_entity_led_paywall",placeholder:!1}),I=!!(0,W.VB)({name:"enable_paywall_conversions_for_referred_members",placeholder:!1}),F=!!(0,W.VB)({name:"enable_paywall_with_dropdown",placeholder:!1}),_=!!(0,W.VB)({name:"enable_referred_memberships_custom_messaging",placeholder:!1}),O=!!(0,W.VB)({name:"enable_referred_memberships_custom_messaging_on_paywall",placeholder:!1}),C=_&&O;o.useEffect((function(){v&&g.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[v]),o.useEffect((function(){g.event("paywall.viewed",{userId:null==u?void 0:u.id})}),[]);var T=function(){var e,t,i;if(null===(e=i=F?c:n.creator)||void 0===e||!e.imageId)return null;var r=null!==(t=i.imageId)&&void 0!==t?t:D.gG;return o.createElement(h.x,{display:"flex",paddingBottom:"16px",justifyContent:"center"},o.createElement(k.z,{miroId:r,alt:i.name||"",diameter:80,freezeGifs:!1}))};return o.createElement(B,null,o.createElement(q.o,{postRenderCallback:function(){}},(function(e){var t,l=e.loading,d=e.showSuggestedAccount,p=e.declineSuggestedAccount,g=e.userSocialLogins;return l?o.createElement(o.Fragment,null):(d&&(t={alternateUserSuggestionShown:d,alternateUserSuggestionAccountType:(0,X.S)(g),alternateUserSuggestionTargetUserId:!!g&&g.userId,alternateUserSuggestionSourceUserId:m}),o.createElement(o.Fragment,null,o.createElement(h.x,{display:"flex",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},o.createElement(h.x,{display:"flex",flexDirection:"column",padding:i?"48px 0 0":"48px 50px",sm:{padding:w?"0":"28px 16px 32px",textAlign:"center"}},(w||F||C)&&o.createElement(T,null),o.createElement($.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},function(e,n,t,i,r,a,l){var d=r.showSuggestedAccount,c=r.showTrialPaywall,s=r.inHoldback,u=r.showEntityLedPaywall,m=r.enableCreatorsDropdown,p=r.enableCustomMessaging,g=n?(0,X.J)(n):null;g=g&&g.length<=13?g:null;var v="Read every story from ".concat(t," (and thousands of other writers on ").concat(e,").");return d?"Switch to your member account for unlimited reading.":c?o.createElement(h.x,{textAlign:"center",sm:{marginBottom:"5px",textAlign:"center"}},g?"".concat(g,", keep reading."):"Keep reading."):u&&!m?o.createElement(h.x,{maxWidth:"680px",margin:"auto",textAlign:"center"},o.createElement(h.x,{sm:{marginBottom:"8px"}},g?"".concat(g,", read more from ").concat(t," — and everyone else on ").concat(e,"."):"This is a member-only story published by ".concat(t,"."))):m&&a?o.createElement(h.x,{maxWidth:"680px",margin:"auto",textAlign:"center",sm:{width:"327px"}},o.createElement($.F1,{scale:l?"S":"M",clamp:2},"Keep reading and support ",a.name)):p?o.createElement(h.x,{maxWidth:"680px",margin:"auto",textAlign:"center"},o.createElement(h.x,{sm:{marginBottom:"8px"}},i||v)):o.createElement(h.x,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},s?"How to read this story — and everything else on ".concat(e,"."):g?t?"".concat(g,", read more from ").concat(t," — and everyone else on ").concat(e,"."):"".concat(g,", here's how to read this story — and everything else on ").concat(e,"."):t?"How to read this story from ".concat(t," — and everything else on ").concat(e,"."):"How to read this story — and everything else on ".concat(e,"."))}(a,u&&u.name,n.creator&&n.creator.name,n.creator&&n.creator.referredMembershipCustomHeadline,{showSuggestedAccount:d,showTrialPaywall:f,inHoldback:E,showEntityLedPaywall:w,enableCreatorsDropdown:F,enableCustomMessaging:C},c,y)),o.createElement(N.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER",tag:"div"},!d&&!f&&o.createElement(o.Fragment,null,w&&!F?o.createElement(h.x,{maxWidth:"680px",margin:"auto",textAlign:"center"},o.createElement(h.x,{marginTop:"8px",marginBottom:"16px"},"Reward great thinking. When you become a member, you get unlimited access to Medium and 50% of your membership fee goes to"," ",n.creator&&n.creator.name,".*")):F?o.createElement(h.x,{maxWidth:"680px",margin:"auto",textAlign:"center",sm:{width:"327px"}},o.createElement(h.x,{marginTop:"10px",marginBottom:"10px"},"When you become a member, you will get unlimited access to Medium and 50% of your membership fee will go to ",null==c?void 0:c.name,".*")):C?o.createElement(h.x,{marginTop:"8px",marginBottom:"28px",textAlign:"center",sm:{width:"327px"}},o.createElement(h.x,{marginTop:"10px",marginBottom:"10px"},x||b)):o.createElement(h.x,{marginTop:"8px",marginBottom:"28px",textAlign:"left",sm:{display:"inline-block",textAlign:"center"}},"You’ve read all your free member-only stories, become a member to get unlimited access. Your membership fee supports the voices you want to hear more from."),o.createElement(h.x,{display:"flex",justifyContent:F||w||C?"center":void 0},F&&o.createElement(h.x,{display:"flex",alignItems:"center",xs:{flexDirection:"column"},sm:{flexDirection:"column"}},!y&&o.createElement(h.x,{display:"flex"},o.createElement(M,{post:n,onSelect:s}),o.createElement(h.x,{paddingLeft:"8px"},o.createElement(re,{post:n,showTrialPaywall:f,authDomain:r,enablePaywallConversionsForReferredMembers:I,enableCreatorsDropdown:!0,selectedCreatorId:null==c?void 0:c.id}))),y&&o.createElement(h.x,null,o.createElement(re,{post:n,showTrialPaywall:f,authDomain:r,enablePaywallConversionsForReferredMembers:I,enableCreatorsDropdown:!0,selectedCreatorId:null==c?void 0:c.id}),o.createElement(h.x,{paddingTop:"8px"},o.createElement(M,{post:n,onSelect:s})))),!F&&o.createElement(re,{post:n,showTrialPaywall:f,authDomain:r,enablePaywallConversionsForReferredMembers:I})),(w||F)&&o.createElement(h.x,{paddingTop:"16px",margin:"auto",textAlign:"center"},o.createElement(N.F,{scale:"S",color:"LIGHTER"},"* Minus standard payment processing fees"))),o.createElement(h.x,{marginTop:d?"28px":"8px",marginBottom:"28px",paddingRight:"6px",paddingLeft:"6px",sm:{display:"inline-block"}},function(e,n,t,i){var r=t.showTrialPaywall;if(t.showSuggestedAccount&&n){var a=n.isMember,l=n.redactedEmailAddress;return o.createElement(o.Fragment,null,"Looks like you're coming from the ",a&&"member ","account"," ",o.createElement("b",null,l)," but you’re signed in as ",o.createElement("b",null,null==i?void 0:i.email),". Switch to your",a?" member account for unlimited access":" account",".")}return o.createElement(h.x,{textAlign:r?"center":"left"},r?"Start your 1 month free trial for unlimited access to everything on ".concat(e,". If it’s not for you, cancel anytime."):"")}(a,g,{showSuggestedAccount:d,showTrialPaywall:f},u))),!!d&&g&&o.createElement(oe,{declineSuggestedAccount:p,userSocialLogins:g,suggestedAccountEventData:t,showSuggestedAccount:d,postId:n.id}),f&&!d&&o.createElement(re,{post:n,showTrialPaywall:f,authDomain:r,enablePaywallConversionsForReferredMembers:I})))))})))},de=(0,a.Ps)(ie()),ce=t(33916),se=t(36405),ue=t(26350),me=t(28451),pe=t(54935),ge=t(32442),ve=t(69862),fe=t(73950),ke=t(21755),he=t(40980);function Se(){var e=r()(["\n  fragment RegWall_meteringInfo on MeteringInfo {\n    postIds\n  }\n"]);return Se=function(){return e},e}function ye(){var e=r()(["\n  fragment RegWall_post on Post {\n    id\n    lockedSource\n    ...SusiClickable_post\n  }\n  ","\n"]);return ye=function(){return e},e}var Ee="post_regwall",be=function(e){var n=e.enablePasswords,t=e.meterCount,i=e.postId,r={operation:"register"},a=(0,pe.j)().openModal;return o.createElement(h.x,{display:"flex",flexDirection:"column",textAlign:"center",sm:{flexDirection:"column"}},o.createElement(h.x,{margin:"".concat(n?"32px":"62px"," 0 10px"),sm:{margin:"40px 0 12px 0"}},o.createElement(he.$,{eventData:{meterCount:t,operation:r.operation,postId:i}},o.createElement(fe.x,r))),o.createElement(h.x,{marginBottom:n?"32px":"52px",sm:{marginBottom:"40px"}},o.createElement(he.$,{eventData:{meterCount:t,operation:r.operation,postId:i}},n?o.createElement(ge.R,{goToEmailAuthStep:function(){a({step:"ENTER_EMAIL",susiEntry:Ee,operation:"register"})},operation:"register"}):o.createElement(ve.q,r))))},xe=function(e){var n=e.meteringInfo,t=e.post,i=e.setIsLORegWallVisible,r=(0,P.Av)(),a=!!(0,se.P5)("enable_passwords"),l="LOCKED_POST_SOURCE_SYNDICATED"===t.lockedSource,d=!!(0,W.VB)({name:"enable_mobile_regwall_read_in_app_button",placeholder:!1}),c=(0,ee.s)()||ke.j.lg,s=c===ke.j.xs||c===ke.j.sm;return o.useEffect((function(){r.event("meter.viewed",{meterCount:null==n?void 0:n.postIds.length,postId:t.id,uiType:l?me.j.SyndicatedRegwall:me.j.RegWall}),i&&i(!0),s&&r.event("experiment.eligible",{experimentId:"fd487b2905f"})}),[]),o.createElement(I.cW,{source:{postId:t.id,susiEntry:Ee}},o.createElement(B,null,o.createElement(h.x,{display:"flex",textAlign:"center",justifyContent:"center",sm:{flexDirection:"column",textAlign:"center"}},o.createElement(h.x,{padding:"48px 56px",sm:{padding:"28px 16px 48px"}},o.createElement($.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},o.createElement(h.x,{display:"none",sm:{display:"block"}},"To keep reading this story, get the free app or log in."),o.createElement(h.x,{display:"block",sm:{display:"none"}},"Read the rest of this story with a free account.")),o.createElement(N.F,{color:"DARKER",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},tag:"div"},o.createElement(h.x,{display:"none",sm:{display:"block"}},o.createElement(h.x,{margin:"".concat(a?"40px":"42px"," 0")},o.createElement(ce.a,{isButton:!0,postId:t.id,appEntry:"regwall",copy:"".concat(d?"Read in app":"Open in app")})),o.createElement(h.x,{marginBottom:"-20px"},"Or, continue in mobile web")),o.createElement(be,{meterCount:null==n?void 0:n.postIds.length,postId:t.id,enablePasswords:a}),"Already have an account?"," ",o.createElement(ue.R9,{linkStyle:"OBVIOUS",operation:"login",post:t,susiEntry:Ee},"Sign in"))))))},we=(0,a.Ps)(ye(),ue.qU),Ne=(0,a.Ps)(Se()),Pe=t(97426);function Ie(){var e=r()(["\n  fragment Wall_meteringInfo on MeteringInfo {\n    ...RegWall_meteringInfo\n  }\n  ","\n"]);return Ie=function(){return e},e}function Fe(){var e=r()(["\n  fragment Wall_post on Post {\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n    isLocked\n    isMarkedPaywallOnly\n    ...MemberOnlyWall_post\n    ...PayWall_post\n    ...RegWall_post\n  }\n  ","\n  ","\n  ","\n"]);return Fe=function(){return e},e}(0,a.Ps)(Fe(),u,de,we),(0,a.Ps)(Ie(),Ne);var _e=function(e){var n=e.post,t=e.meteringInfo,i=e.excludePadding,r=e.setIsLORegWallVisible,a=n.id,l=n.content.isLockedPreviewOnly,d=(0,V.H)(),c=d.value,s=d.loading;if(!(0,Pe.n)(a,l).loading&&l){if(c)return o.createElement(le,{post:n,excludePadding:i});if(!s)return o.createElement(xe,{post:n,meteringInfo:t,setIsLORegWallVisible:r})}return null}},29969:(e,n,t)=>{"use strict";t.d(n,{X:()=>F});var i=t(63038),r=t.n(i),a=t(59713),o=t.n(a),l=t(67294),d=t(19616),c=t(83302),s=t(25735),u=t(6443),m=t(67701),p=t(77355),g=t(93310),v=t(20113),f=t(87691),k=t(18627),h=t(66411),S=t(14646),y=t(31889),E=t(34135),b=t(97217),x=t(43487),w=t(97489),N=t(50458),P=function(e,n){var t;return t={borderTop:"3px solid ".concat(e.accentColor.border.normal),padding:"32px 32px 26px 32px",marginTop:"8px",marginBottom:"25px",backgroundColor:e.baseColor.background.light},o()(t,w.sm(e),{padding:"24px 24px 28px 24px"}),o()(t,"minHeight",n),t},I=function(e){var n=e.viewer,t=e.newsletterV3,i=e.newsletterV3LandingUrl,r=e.useCustomDomainLOFlow,a=e.isVertical,o=e.handleClick;return n||r?t&&l.createElement(d.x,{newsletterV3:t,buttonLayout:"COMPACT",helperTextColor:"DARKER",redirectUrl:r?i:void 0}):t&&l.createElement(c.QL,{newsletterV3:t,isVertical:a,handleClick:o})},F=function(e){var n,t,i,a,o,d=e.postId,c=e.publisher,w=e.isVertical,F=void 0!==w&&w,_=l.useRef(null),O=(0,x.v9)((function(e){return e.config.authDomain})),C=(0,k.Av)(),D=(0,S.I)(),T=(0,y.F)(),A=(0,u.H)().value,R=!!(0,s.VB)({name:"enable_newsletter_lo_flow_custom_domains",placeholder:!1}),L=l.useState(!1),M=r()(L,2),j=M[0],U=M[1],B=l.useState("0px"),W=r()(B,2),V=W[0],H=W[1],z=null==(0,x.v9)((function(e){return e.navigation.currentLocation})).match("http[s]?://[^/]*".concat(O)),G=!A&&z&&R,Y=c.newsletterV3,q=null==Y?void 0:Y.type,K=c.username,$=void 0===K?"":K,Q=(0,N.iBn)(null!==(n=null==Y?void 0:Y.slug)&&void 0!==n?n:"",O,q===b.Rr.NEWSLETTER_TYPE_COLLECTION?c:void 0,q===b.Rr.NEWSLETTER_TYPE_AUTHOR&&$?$:void 0),X="Collection"===c.__typename?c:void 0,Z=(0,m.gY)(X).viewerEdge;switch(q){case b.Rr.NEWSLETTER_TYPE_COLLECTION:t="Sign up for ".concat(null==Y?void 0:Y.name),i="0px",a="You're an editor of ".concat(null==Y?void 0:Y.name),o=null==Z?void 0:Z.isEditor;break;case b.Rr.NEWSLETTER_TYPE_AUTHOR:t=(null==Y?void 0:Y.promoHeadline)||"Get an email whenever ".concat(c.name," publishes."),i="6px",a="You cannot subscribe to yourself",o=c.viewerIsUser}j&&(t="Check your inbox.");var J=!1,ee=function(){!J&&ne()&&(C.event("newsletterV3.promoViewed",{newsletterV3Id:null==Y?void 0:Y.id,postId:d}),J=!0)},ne=function(){var e;if(!_.current)return!1;var n=null===(e=_.current)||void 0===e?void 0:e.getBoundingClientRect(),t=n.top+n.height/2;return t>=0&&t<=window.innerHeight};return l.useEffect((function(){return ee(),window&&E.V6.on("scroll",ee),function(){E.V6.off("scroll",ee)}}),[]),l.useEffect((function(){var e;if(_.current){var n=(null===(e=_.current)||void 0===e?void 0:e.getBoundingClientRect()).height;H("".concat(n,"px"))}}),[_]),Y&&l.createElement(h.cW,{source:{name:"newsletter_v3_promo",susiEntry:"newsletter_v3_promo"}},l.createElement("div",{ref:_,className:F?void 0:D(P(T,V))},l.createElement(p.x,{paddingBottom:i},l.createElement(v.X6,{scale:{xs:"S",sm:"S",md:F?"S":"M",lg:F?"S":"M",xl:F?"S":"M"}},t)),q===b.Rr.NEWSLETTER_TYPE_COLLECTION&&!j&&l.createElement(l.Fragment,null,l.createElement(p.x,{paddingTop:"4px"},l.createElement(f.F,{tag:"h3",scale:"S",color:"DARKER"},"By ".concat(c.name))),l.createElement(p.x,{paddingTop:"8px",paddingBottom:"10px"},l.createElement(f.F,{scale:F?"S":{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},null==Y?void 0:Y.description," ",l.createElement(g.r,{inline:!0,linkStyle:"OBVIOUS",href:Q},"Take a look.")))),q===b.Rr.NEWSLETTER_TYPE_AUTHOR&&(null==Y?void 0:Y.promoBody)&&!j&&l.createElement(l.Fragment,null,l.createElement(p.x,{paddingTop:"8px",paddingBottom:"8px"},l.createElement(f.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},null==Y?void 0:Y.promoBody))),o?l.createElement(p.x,{paddingTop:"10px"},l.createElement(f.F,{scale:"M",color:"DARKER"},a)):l.createElement(p.x,{display:"flex",flexWrap:"wrap"},l.createElement(I,{viewer:A,useCustomDomainLOFlow:G,newsletterV3:Y,newsletterV3LandingUrl:Q,isVertical:F,handleClick:function(){return U(!0)}}))))}},1951:(e,n,t)=>{"use strict";t.d(n,{g:()=>o,t:()=>l});var i=t(67294),r=t(9354),a=t(75880),o=function(e){var n=e.creator,t=l(n);return n?t:{value:!1}},l=function(e){var n,t,o,l=(0,a.Pd)(e),d=l.viewerEdge,c=l.loading,s=i.useRef(null),u=(0,r.T)({newsletterSlug:null==e||null===(n=e.newsletterV3)||void 0===n?void 0:n.slug,username:null==e?void 0:e.username}),m=u.viewerEdge,p=u.loading;return(o=null!==s.current?{value:s.current}:c||p?{loading:!0}:null!=e&&null!==(t=e.newsletterV3)&&void 0!==t&&t.showPromo?{value:!(!(null!=d&&d.isUser||null==m)&&m.isSubscribed)}:{value:!1}).loading||void 0===o.value||null!==s.current||(s.current=o.value),o}},6455:(e,n,t)=>{"use strict";t.d(n,{h:()=>C});var i=t(59713),r=t.n(i),a=t(67294),o=t(70405),l=t(12291),d=t(28655),c=t.n(d),s=t(319),u=t.n(s),m=t(82492),p=t.n(m),g=t(71439),v=t(68254),f=t.n(v),k=t(20512),h=t(46696),S=t(78870),y=t(15085),E=t(50458),b=t(68216);function x(){var e=c()(["\n  fragment PostJsonLd_post on Post {\n    id\n    title\n    seoTitle\n    mediumUrl\n    creator {\n      name\n      username\n      ...userUrl_user\n    }\n    collection {\n      id\n      name\n      domain\n      slug\n      logo {\n        id\n        originalWidth\n        originalHeight\n      }\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalWidth\n      originalHeight\n    }\n    isLocked\n    firstPublishedAt\n    updatedAt\n    isShortform\n    shortformType\n    structuredData\n    ...getTitleForPost_post\n  }\n  ","\n  ","\n"]);return x=function(){return e},e}function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){r()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var P=(0,l.$j)((function(e){var n=e.config,t=n.productName,i=n.defaultImages,r=n.collectionStructuredData,a=e.navigation;return{currentLocation:a.currentLocation,host:a.host,productName:t,defaultImages:i,collectionStructuredData:r}}))((function(e){var n=e.currentLocation,t=e.host,i=e.post,r=e.postDescription,l=e.productName,d=e.defaultImages,c=e.collectionStructuredData,s=i.collection,m=i.creator,g=i.id,v=i.mediumUrl,b=i.isLocked,x=i.previewImage,w=i.firstPublishedAt,P=i.updatedAt,I=i.structuredData,F=(0,y._t)(i,l),_={id:d.postLogo.imageId,originalWidth:d.postLogo.width,originalHeight:d.postLogo.height},O={id:d.orgLogo.imageId,originalWidth:d.orgLogo.width,originalHeight:d.orgLogo.height},C=s?{"@type":"Organization",name:s.name,url:s.domain||(0,S.l1)(t,(0,E.WGd)(s,n)),logo:function(e){if(!e||!e.logo||!e.logo.id)return(0,k.lc)(O);var n=(0,k.lc)(e.logo);return n&&60===n.height&&n.width<=600?n:(0,k.lc)(O)}(s)}:{"@type":"Organization",name:l,url:(0,S.l1)(t,"/"),logo:(0,k.lc)(O)};s&&c&&c[s.id]&&p()(C,c[s.id].data);var D=x&&x.id?(0,k.Y4)(N(N({},x),{},{miroId:x.id,croppedWidth:1200})):(0,k.NJ)({url:(0,h.W6)({miroId:_.id,width:_.originalWidth}),height:_.originalHeight,width:_.originalWidth}),T=r||"",A=b?{isAccessibleForFree:"False",hasPart:{"@type":"WebPageElement",isAccessibleForFree:"False",cssSelector:".meteredContent"}}:{},R={"@context":"http://schema.org"},L=N({"@type":"NewsArticle",image:D,url:v,dateCreated:w&&new Date(w).toISOString(),datePublished:w&&new Date(w).toISOString(),dateModified:P&&new Date(P).toISOString(),headline:F,name:F,description:T,identifier:g,author:m&&m.name&&m.username?{"@type":"Person",name:m.name||m.username,url:(0,E.AWr)(m,t)}:null,creator:m&&[m.name],publisher:C,mainEntityOfPage:v},A),M=N(N({},R),L);if(I&&I.length>0)try{var j=JSON.parse(I);if(j&&null!=j&&j["@graph"]&&(null==j?void 0:j["@graph"].length)>0){var U=((null==j?void 0:j["@graph"])||[]).filter((function(e){return(null==e?void 0:e["@type"])&&"NewsArticle"!==(null==e?void 0:e["@type"])}));U&&U.length>0&&(M=N(N({},R),{},{"@graph":[L].concat(u()(U))}))}}catch(e){}return a.createElement(o.q,null,a.createElement("script",{type:"application/ld+json"},f()(M,{isJSON:!0})))})),I=((0,g.Ps)(x(),y.bq,b.$m),t(21372)),F=t(22680);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){r()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var C=(0,l.$j)((function(e){return{authDomain:e.config.authDomain,host:e.navigation.host,productName:e.config.productName}}))((function(e){var n,t,i,r=e.authDomain,l=e.productName,d=e.post,c=d.canonicalUrl,s=d.collection,u=d.creator,m=d.id,p=d.latestPublishedAt,g=d.mediumUrl,v=d.previewContent,f=d.socialTitle,k=d.socialDek,S=d.visibility,b=d.isShortform,x=u&&u.name,w=(0,y.yB)(d),N=d.title||"",_=w.latestTitle||N;if(b){var C=O(O({},d),{},{title:_});t=(0,y.oS)(C,l,w.hasTitleGraf).trim(),i=(0,F.OO)(d,w.hasTitleGraf)}else t=(0,y._t)(d,l,w,!0).trim(),i=(0,F.j7)(d);var D,T,A=k||v&&v.subtitle||i;if(d&&d.previewImage&&d.previewImage.id&&!d.isLimitedState){var R=d.previewImage;D=(0,h.vz)({miroId:R.id,aspectRatio:1.9,croppedWidth:R.originalWidth?Math.min(R.originalWidth,1200):1200,originalWidth:R.originalWidth,originalHeight:R.originalHeight,focusPercentX:R.focusPercentX,focusPercentY:R.focusPercentY})}else if(d.isLimitedState){var L={id:"1*3SjgcTt7wCYYS10ff6-0JQ.png",originalWidth:748,originalHeight:390,focusPercentX:50,focusPercentY:40};D=(0,h.vz)({miroId:L.id,aspectRatio:1.9,croppedWidth:L.originalWidth?Math.min(L.originalWidth,1200):1200,originalWidth:L.originalWidth,originalHeight:L.originalHeight,focusPercentX:L.focusPercentX,focusPercentY:L.focusPercentY})}u&&u.username&&(T=(0,E.AWr)(u,r));var M=(0,E.CK_)(m),j=!(null!==(n=(0,y.c_)(d))&&void 0!==n&&n.shouldIndexPost),U=p&&new Date(p).toISOString(),B=(0,I.Vd)(d.readingTime||0),W=u&&u.twitterScreenName,V=s&&s.twitterUsername||"Medium",H=s&&s.facebookPageId,z=f||N||_;d.isLimitedState&&(z="");var G=d.isLimitedState?"":A,Y=a.useMemo((function(){var e;return a.createElement(o.q,null,a.createElement("meta",{property:"og:type",content:"article"}),U&&a.createElement("meta",{property:"article:published_time",content:U}),a.createElement("title",null,t),a.createElement("meta",{name:"title",content:t}),a.createElement("meta",{property:"og:title",content:z}),a.createElement("meta",{property:"twitter:title",content:z}),H&&a.createElement("meta",{property:"fb:pages",content:H}),a.createElement("meta",{name:"twitter:site",content:"@".concat(V)}),a.createElement("meta",{name:"twitter:app:url:iphone",content:M}),a.createElement("meta",{property:"al:android:url",content:M}),a.createElement("meta",{property:"al:ios:url",content:M}),a.createElement("meta",{property:"al:android:app_name",content:"Medium"}),i&&a.createElement("meta",{name:"description",content:i}),A&&a.createElement("meta",{property:"og:description",content:G}),A&&a.createElement("meta",{property:"twitter:description",content:G}),a.createElement("meta",{property:"og:url",content:null!=g?g:void 0}),a.createElement("meta",{property:"al:web:url",content:null!=g?g:void 0}),D&&a.createElement("meta",{property:"og:image",content:D}),D&&a.createElement("meta",{name:"twitter:image:src",content:D}),a.createElement("meta",{name:"twitter:card",content:D?"summary_large_image":"summary"}),T&&a.createElement("meta",{property:"article:author",content:T}),T&&a.createElement("link",{rel:"author",href:T}),W&&a.createElement("meta",{name:"twitter:creator",content:"@".concat(W)}),x&&a.createElement("meta",{name:"author",content:x}),a.createElement("link",{rel:"canonical",href:null!==(e=c||g)&&void 0!==e?e:void 0}),a.createElement("link",{rel:"alternate",href:(0,E.zix)((0,E.o2w)("medium.com",d.id))}),a.createElement("meta",{name:"robots",content:"".concat(j?"noindex":"index",",follow,max-image-preview:large")}),a.createElement("meta",{name:"referrer",content:"UNLISTED"!==S?"unsafe-url":"origin"}),a.createElement("meta",{name:"twitter:label1",content:"Reading time"}),a.createElement("meta",{name:"twitter:data1",content:"".concat(B," min read")}))}),[t,c,g,D,m,f,i,T,x,W,M,j,U]);return a.createElement(a.Fragment,null,Y,a.createElement(P,{post:d,postDescription:i}))}))},45114:(e,n,t)=>{"use strict";t.d(n,{kD:()=>v,T8:()=>f,Qw:()=>k});var i,r,a=t(59713),o=t.n(a),l=t(28959),d="post-view",c="post-read",s="topic-view",u="medium-search",m="external-search",p=(i={},o()(i,d,200),o()(i,c,200),o()(i,s,200),o()(i,u,200),o()(i,m,200),i),g=(r={},o()(r,d,new l.Z("pv")),o()(r,c,new l.Z("pr")),o()(r,s,new l.Z("tv")),o()(r,u,new l.Z("ms")),o()(r,m,new l.Z("es")),r),v=function(e){h(d,e,Date.now())},f=function(e){h(c,e,Date.now())},k=function(e){h(s,e,Date.now())},h=function(e,n,t){var i=g[e];i.getCount()===p[e]&&i.clean();try{i.set(n,t)}catch(e){i.clean()}}},85763:(e,n,t)=>{"use strict";t.d(n,{bo:()=>E,db:()=>y,uz:()=>b});var i=t(87757),r=t.n(i),a=t(48926),o=t.n(a),l=t(63038),d=t.n(l),c=t(67294),s=t(45114),u=t(25550),m=t(49608),p=t(18627),g=t(80872),v=t(43487),f=t(62896),k=function(){var e=o()(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{h((function(n){e(n)}))}catch(e){n(e)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function h(e){var n="Unknown";function t(t){e({isPrivate:t,browserName:n})}function i(){void 0!==Promise?navigator.webkitTemporaryStorage.queryUsageAndQuota((function(e,n){var i;t(n<(void 0!==(i=window).performance&&void 0!==i.performance.memory&&void 0!==i.performance.memory.jsHeapSizeLimit?performance.memory.jsHeapSizeLimit:1073741824))}),(function(e){throw new Error("detectIncognito somehow failed to query storage quota: "+e.message)})):(0,window.webkitRequestFileSystem)(0,1,(function(){t(!1)}),(function(){t(!0)}))}!function(){var e=navigator.userAgent,r=navigator.vendor;try{if((0,f.G6)(e))!function(){var e,i,r=window;if(void 0!==navigator.maxTouchPoints)if(void 0!==r.safari&&void 0===r.DeviceMotionEvent)n="Safari for macOS",function(){try{window.safari.pushNotification.requestPermission("https://example.com","private",{},(function(){}))}catch(e){return t(!new RegExp("gesture").test(e))}t(!1)}();else{if(void 0===r.DeviceMotionEvent)throw new Error("detectIncognito Could not identify this version of Safari");n="Safari for iOS",e=!1,(i=document.createElement("iframe")).style.display="none",document.body.appendChild(i),i&&i.contentWindow&&i.contentWindow.applicationCache.addEventListener("error",(function(){return e=!0,t(!0)})),setTimeout((function(){e||t(!1)}),100)}else!function(){var e=window.openDatabase,n=window.localStorage;try{e(null,null,null,null)}catch(e){return t(!0)}try{n.setItem("test","1"),n.removeItem("test")}catch(e){return t(!0)}t(!1)}()}();else if((0,f.i7)(r))n=function(){var e=navigator.userAgent;return e.match(/Chrome/)?e.match(/Edg/)?"Edge":void 0!==navigator.brave?"Brave":void 0!==navigator.opr?"Opera":"Chrome":"Chromium"}(),i();else if((0,f.vU)(e))n="Firefox",t(void 0===navigator.serviceWorker);else{if(void 0===navigator.msSaveBlob)throw new Error("detectIncognito cannot determine the browser");n="Internet Explorer",t(void 0===window.indexedDB)}}catch(e){return n="Unknown",t(!1)}}()}var S=t(15085),y=1,E=2,b=function(e){var n=e.post,t=e.clientViewedContext,i=e.overrideCommonData,a=void 0===i?{}:i,l=(0,p.Av)(),f=(0,u.r)(),h=f.loading,y=f.viewerId,E=(0,v.v9)((function(e){return e.client.viewerIsBot})),b=y&&(0,m.Q)(y),x=(null==n?void 0:n.collection)||{},w=x.id,N=x.slug,P=((null==n?void 0:n.content)||{}).validatedShareKey,I=null==n?void 0:n.id,F=c.useState(!1),_=d()(F,2),O=_[0],C=_[1],D=c.useState(null),T=d()(D,2),A=T[0],R=T[1],L=c.useCallback(o()(r().mark((function e(){var n,t,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,i=null!==(n="Unknown"===t.browserName||t.isPrivate)&&void 0!==n?n:null,C(!0),R(i);case 6:case"end":return e.stop()}}),e)}))),[]);c.useEffect((function(){if(!h&&I&&y&&O){if(null!=n&&n.isPublished){b||(n.isLocked?(0,g.yB)():(0,g.B8)());var e=(0,S.c_)(n),i=e.shouldIndexPost,r=e.indexReason;E&&l.event("post.clientBotCrawled",{postId:I,userId:y,userAgent:navigator.userAgent,lastCrawledAt:Date.now(),isIndexable:i,indexReason:r}),l.event("post.clientViewed",{postId:I,collectionId:w,collectionSlug:N,context:t,isFriendLink:!!P,source:"post_page",isIncognitoMode:A},a)}else l.event("post.draftViewed",{postId:I});return b||(0,s.kD)(I),function(){}}O||L()}),[I,y,h,A,L])}},73580:(e,n,t)=>{"use strict";t.d(n,{t:()=>E});var i=t(67294),r=t(12291),a=t(18702),o=t(25550),l=t(6443),d=t(67701),c=t(28655),s=t.n(c),u=t(46829);function m(){var e=s()(["\n  query TopicViewerEdge($topicId: ID!) {\n    topic(id: $topicId) {\n      ... on Topic {\n        id\n        viewerEdge {\n          id\n          isFollowing\n        }\n      }\n    }\n  }\n"]);return m=function(){return e},e}var p=(0,t(71439).Ps)(m()),g=t(75880),v=t(98067),f=t(77280),k=t(43487),h=t(55765),S=t(50458),y=t(85763),E=function(e){var n=e.post,t=e.meteringInfo,c=e.clientViewedContext,s=void 0===c?y.db:c,m=e.overrideCommonData,E=void 0===m?{}:m;(function(e){var n,t=e.post,c=e.meteringInfo,s=(0,r.I0)(),m=(0,o.r)(),y=m.loading,E=m.viewerId,b=(0,f.PM)(),x=(0,k.v9)((function(e){return e.navigation.referrer})),w=(0,k.v9)((function(e){return e.config.authDomain})),N=null==t?void 0:t.id,P=(0,h.P)(),I=P.inAppBrowser,F=P.loading,_=(0,g.Pd)(null==t?void 0:t.creator),O=_.viewerEdge,C=_.loading,D=(0,d.gY)(null==t?void 0:t.collection),T=D.viewerEdge,A=D.loading,R=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,u.useQuery)(p,{variables:{topicId:n},ssr:!1,skip:!n}),i=t.loading,r=t.error,a=t.data;return i?{loading:i}:r?{error:r}:{viewerEdge:null==a||null===(e=a.topic)||void 0===e?void 0:e.viewerEdge}}(null==t||null===(n=t.primaryTopic)||void 0===n?void 0:n.id),L=R.viewerEdge,M=R.loading,j=A||C||M,U=(0,l.H)(),B=U.loading,W=U.value;i.useEffect((function(){if(N&&!y&&!B&&E&&!F&&!j){if(null!=t&&t.isPublished){var e=(0,a.RD)({inAppBrowser:I,post:t,meteringInfo:c,referrer:x,referrerSource:b,viewer:W,currentUserId:E,creatorViewerEdge:O,collectionViewerEdge:T,topicViewerEdge:L});t.collection&&t.collection.domain&&(e.data.$canonical_url=(0,S.o2w)(w,N)),(0,a.Pu)(e),s((0,v.aj)(e)),s((0,v.QZ)())}return function(){s((0,v.Uo)())}}}),[N,B,W,y,E,F,I,W,j])})({post:n,meteringInfo:t}),(0,y.uz)({post:n,clientViewedContext:s,overrideCommonData:E})}},97426:(e,n,t)=>{"use strict";t.d(n,{n:()=>s});var i=t(46829),r=t(77280),a=t(43487),o=t(319),l=t.n(o),d=t(42423),c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostViewerEdgeContentQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PostMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"fullContent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}},{kind:"Field",name:{kind:"Name",value:"validatedShareKey"}},{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBody_bodyModel"}}]}}]}}]}}]}}]}}]}}].concat(l()(d.Pk.definitions))},s=function(){var e,n,t,o,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=(0,a.v9)((function(e){return e.navigation.referrer})),u=null!==(e=(0,r.G1)())&&void 0!==e?e:void 0,m=null!==(n=(0,r.PM)())&&void 0!==n?n:void 0,p={referrer:s,sk:u,source:m},g=(0,i.useQuery)(c,{variables:{postId:l,postMeteringOptions:p},ssr:!1,skip:!l||!d}),v=g.loading,f=g.error,k=g.data,h=null==k||null===(t=k.post)||void 0===t||null===(o=t.viewerEdge)||void 0===o?void 0:o.fullContent;return v?{loading:v}:f?{error:f}:{content:h}}},867:(e,n,t)=>{"use strict";t.d(n,{o:()=>y});var i=t(63038),r=t.n(i),a=t(28655),o=t.n(a),l=t(71439),d=t(80439),c=t(67294),s=t(36405),u=t(25550),m=t(93717),p=t(18839),g=t(18627),v=t(66411),f=t(80872),k=t(43487);function h(){var e=o()(["\n  mutation SendAcctAuthEmailByUserId(\n    $userId: String!\n    $redirect: String\n    $fullName: String\n    $captchaValue: String\n  ) {\n    sendAcctAuthEmailByUserId(\n      userId: $userId\n      redirect: $redirect\n      fullName: $fullName\n      captchaValue: $captchaValue\n    ) {\n      ... on SusiMethod {\n        value\n      }\n      ... on BadRequest {\n        message\n      }\n      ... on FailedChallenge {\n        message\n      }\n      ... on NotFound {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}var S=(0,l.Ps)(h()),y=function(e){var n=e.actionUrl,t=e.children,i=e.onSuccess,a=e.token,o=e.userId,l=(0,g.Av)(),h=!!(0,s.P5)("skip_sign_in_recaptcha"),y=c.useState(!1),E=r()(y,2),b=E[0],x=E[1],w=(0,k.v9)((function(e){return e.navigation.currentLocation})),N=function(){x(!1)},P=(0,v.pK)(),I=(0,v.hp)(),F=n&&a?(0,p.hQ)(w,P,I,n,a):(0,p.hQ)(w,P,I),_=(0,u.r)(),O=_.loading,C=_.error,D=_.viewerId;return O||C?null:c.createElement(d.mm,{mutation:S,onCompleted:function(e){switch(e.sendAcctAuthEmailByUserId.__typename){case"SusiMethod":l.event("site.loginLinkSent",{}),i&&i();break;case"FailedChallenge":l.event("site.loginByEmailCaptchaFailure",{}),x(!1);break;case"BadRequest":case"NotFound":default:N()}},onError:N},(function(e){var n=function(n){(0,f.Zs)(!0,D,o,"Email",!1);var t="medium";l.event("susi.methodClicked",{entryPoint:I,operation:"login",susiMethod:t.toLowerCase(),alternateUserSuggestionShown:!0,alternateUserSuggestionAccountType:t.toLowerCase(),alternateUserSuggestionTargetUserId:o,alternateUserSuggestionSourceUserId:D}),e({variables:{userId:o,redirect:F,captchaValue:n}})};return c.createElement(c.Fragment,null,!h&&c.createElement(m.k,{callback:n,shouldExecuteRecaptcha:b}),t({handleSubmit:function(){return h?n(null):x(!0)}}))}))}},58670:(e,n,t)=>{"use strict";t.d(n,{r:()=>d});var i=t(67294),r=t(69862),a=t(73950),o=t(2959),l=t(40980),d=function(e){var n=e.actionUrl,t=e.token,d=e.userSocialLogins,c={actionUrl:n||"",operation:"login",token:t||"",targetUserId:d.userId,alternateUserSuggestion:!0};return i.createElement(l.$,{eventData:{operation:c.operation}},d.google?i.createElement(a.x,c):d.facebook?i.createElement(r.q,c):d.twitter?i.createElement(o.G,c):i.createElement(i.Fragment,null))}},84157:(e,n,t)=>{"use strict";t.d(n,{G:()=>p});var i=t(59713),r=t.n(i),a=t(67294),o=t(12291),l=t(6443),d=t(93310),c=t(66411),s=t(78285),u=t(43487);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}var p=function(e){var n=e.declineSuggestedAccount,t=e.isSocial,i=(0,u.v9)((function(e){return e.navigation.hasRenderedAlternateUserBanner})),p=(0,c.hp)(),g=(0,o.I0)(),v=(0,l.H)(),f=v.loading,k=v.error,h=v.value;if(f||k)return a.createElement(a.Fragment,null);var S=function(e){return e?a.createElement(d.r,{onClick:function(){return y("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"See all login options"):a.createElement(a.Fragment,null,"Not you?"," ",a.createElement(d.r,{onClick:function(){return y("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"Sign in")," or ",a.createElement(d.r,{onClick:function(){return y("SIGNUP_OPTIONS")},linkStyle:"OBVIOUS"},"create an account"))},y=function(e){var t="SIGNIN_OPTIONS"===e?"login":"register";n(),g((0,s.Pc)(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){r()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({operation:t,step:e},!!p&&{susiEntry:p})))};return i?S(h):h?a.createElement(d.r,{onClick:function(){return n()}},"Not me"):S(t)}},54558:(e,n,t)=>{"use strict";t.d(n,{o:()=>E});var i=t(28655),r=t.n(i),a=t(59713),o=t.n(a),l=t(63038),d=t.n(l),c=t(71439),s=t(80439),u=t(67294),m=t(6443),p=t(25550),g=t(18627),v=t(66411),f=t(97171),k=t(77280);function h(){var e=r()(["\n  query UserSocialLoginsQuery($userId: String!) {\n    userSocialLogins(userId: $userId) {\n      userId\n      twitter\n      facebook\n      google\n      redactedEmailAddress\n      isMember\n      emailAddress\n      userAvatar {\n        __typename\n        username\n        name\n        imageId\n        mediumMemberAt\n      }\n    }\n  }\n"]);return h=function(){return e},e}function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){o()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var E=function(e){var n=e.children,t=e.postRenderCallback,i=(0,g.Av)(),r=(0,v.hp)(),a=(0,k.PM)(),o=(0,v.P7)(a||""),l=o.userId,c=o.name,h=u.useState({shouldRun:!1,showSuggestedAccount:!1,userSocialLogins:{facebook:!1,google:!1,twitter:!1,redactedEmailAddress:"",emailAddress:"",userAvatar:{__typename:"UserAvatar",username:"",name:"",imageId:"",mediumMemberAt:0},userId:"",isMember:!1}}),S=d()(h,2),E=S[0],x=S[1];u.useEffect((function(){var e=E.shouldRun,n=E.showSuggestedAccount,i=E.userSocialLogins;e&&t(w,n,i)}),[E.shouldRun]);var w=(0,m.H)().value,N=(0,p.r)(),P=N.loading,I=N.error,F=N.viewerId;if(P||I)return null;var _=!("email"!==c||w&&w.mediumMemberAt||!l);return _&&l?u.createElement(s.AE,{query:b,variables:{userId:l}},(function(e){var a=e.loading,o=e.error,l=e.data,d=(l=void 0===l?{}:l).userSocialLogins,c=!(a||o||!d||w&&!d.isMember||!d.facebook&&!d.google&&!d.twitter&&!d.redactedEmailAddress),s=y({loading:a,showSuggestedAccount:c},c&&{userSocialLogins:d,declineSuggestedAccount:function(){var e=(0,f.S)(d);i.event("susi.suggestNotYou",{entryPoint:r,susiMethod:e,alternateUserSuggestionAccountType:e,alternateUserSuggestionTargetUserId:null==d?void 0:d.userId,alternateUserSuggestionSourceUserId:F})}});return!t||a||E.shouldRun||x({shouldRun:!0,showSuggestedAccount:c,userSocialLogins:d}),n(s)})):(t&&!E.shouldRun&&x(y(y({},E),{},{shouldRun:!0})),n({showSuggestedAccount:_,loading:!1}))},b=(0,c.Ps)(h())},28451:(e,n,t)=>{"use strict";var i;t.d(n,{j:()=>i}),function(e){e.LOHighlightCTA="lo_highlight_cta",e.LIHighlightCTA="li_highlight_cta",e.RegWall="regwall",e.SyndicatedRegwall="syndicated_regwall"}(i||(i={}))},99849:(e,n,t)=>{"use strict";t.d(n,{t:()=>h});var i=t(28655),r=t.n(i),a=t(63038),o=t.n(a),l=t(71439),d=t(67294),c=t(12291),s=t(45114),u=t(18627),m=t(66411),p=t(34135),g=t(78285),v=t(77280),f=t(84509);function k(){var e=r()(["\n  fragment PostReadTracker_post on Post {\n    id\n    collection {\n      slug\n    }\n    sequence {\n      sequenceId\n    }\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n  }\n"]);return k=function(){return e},e}function h(e,n,t,i){var r=(0,u.Av)(),a=(0,m.pK)(),l=(0,v.he)(),k=d.useState(!1),h=o()(k,2),S=h[0],y=h[1],E=(0,c.I0)();d.useEffect((function(){if(!S&&t){var o=function(){if(n.current&&!S){var o=(0,f.L6)(n.current),d=(0,f.tM)(o),c=d.top+d.height,u=(0,f.tM)((0,f.t_)()),m=u.top+u.height,p=t.content.isLockedPreviewOnly,v=i||a.includes("post_page");if(!p&&m>=c-100&&v){y(!0),E((0,g.C2)(!0));var k={source:i?"post_page":a,postId:t.id,collectionSlug:t.collection?t.collection.slug:"",sequenceId:t.sequence?t.sequence.sequenceId:""},h={referrer:l,referrerSource:a};i?r.event("post.clientRead",k,h):r.event("post.clientRead",k),e||(0,s.T8)(t.id)}}};return p.V6.on("scroll_end",o),function(){p.V6.off("scroll_end",o)}}}),[S,t,i]),d.useEffect((function(){return function(){E((0,g.C2)(!1))}}),[])}(0,l.Ps)(k())},72619:(e,n,t)=>{"use strict";t.d(n,{d0:()=>C,_k:()=>D});var i=t(28655),r=t.n(i),a=t(71439),o=t(67294),l=t(46580),d=t(42174),c=t(27442),s=t(54878),u=t(17878),m=t(25735),p=t(6443),g=t(84531),v=t(77355),f=t(96370),k=t(47230),h=t(93310),S=t(21755),y=t(8126),E=t(87691),b=t(18627),x=t(66411),w=t(43487),N=t(87498),P=t(17583),I=t(78870),F=t(50458),_=t(68216);function O(){var e=r()(["\n  fragment EntityDrivenSubscriptionLandingPageScreen_writer on User {\n    name\n    imageId\n    id\n    username\n    isPartnerProgramEnrolled\n    referredMembershipCustomHeadline\n    referredMembershipCustomBody\n    customStyleSheet {\n      ...CustomThemeProvider_customStyleSheet\n      ...CustomBackgroundWrapper_customStyleSheet\n      ...MetaHeader_customStyleSheet\n    }\n    ...MetaHeader_publisher\n    ...userUrl_user\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return O=function(){return e},e}var C=function(e){var n,t,i=e.user,r=e.redirectExperiment,a=e.postId,_=(0,w.v9)((function(e){return e.config.authDomain})),O=(0,x.pK)(),C=(0,p.H)().value,D=(0,b.Av)(),T=(0,w.v9)((function(e){return e.config.productName})),A=C&&C.id===i.id,R=(0,P.s)()||S.j.lg,L=!!(0,m.VB)({name:"enable_referred_memberships_custom_messaging",placeholder:!1}),M=R===S.j.xs||R===S.j.sm;o.useEffect((function(){D.event("entityDrivenSubscriptionPage.viewed",{creatorId:null==i?void 0:i.id,source:O})}),[]);var j=o.useCallback((function(){D.event("entityDrivenSubCallToAction.clicked",{userId:null==C?void 0:C.id,entityId:null==i?void 0:i.id})}),[i,null==C?void 0:C.id,_]);if(!i)return null;var U=null!==(n=i.name)&&void 0!==n?n:"",B=null!==(t=i.imageId)&&void 0!==t?t:N.gG,W=i.id,V=(0,F.AWr)(i,_),H=(0,I.Rk)((0,F.c5p)(_),{subscribeToUserId:W,susiEntry:"entity_driven_subscription_lp"}),z=a?(0,F.o2w)(_,a):V,G=null!=C&&C.mediumMemberAt?V:H,Y="Read every story from ".concat(U," (and thousands of other writers on ").concat(T,")."),q="Your membership fee directly supports ".concat(U," and other writers you read. You'll also get full access to every story on ").concat(T,"."),K=L&&i.referredMembershipCustomHeadline?i.referredMembershipCustomHeadline:Y,$=L&&i.referredMembershipCustomBody?i.referredMembershipCustomBody:q;return o.createElement(o.Fragment,null,o.createElement(x.cW,{source:{name:"entity_driven_subscription",userId:W}},o.createElement(s.G8,{customStyleSheet:i.customStyleSheet},o.createElement(c.f,{customStyleSheet:i.customStyleSheet},o.createElement(v.x,{display:"flex",height:"100vh",flexDirection:"column"},o.createElement(v.x,null,M?o.createElement(l.kw,{isLogoCentered:!1,marginBottomSm:0}):o.createElement(d.Go,{forceSmall:!0,publisher:i,customStyleSheet:i.customStyleSheet})),o.createElement(v.x,{display:"flex",height:"0",flexGrow:"1",textAlign:"center",justifyContent:"center",alignItems:"center",flexDirection:"column"},o.createElement(f.P,{size:"inset"},o.createElement(v.x,{display:"flex",paddingBottom:"32px",justifyContent:"center"},o.createElement(u.s,null,o.createElement(g.z,{miroId:B,alt:U||"",diameter:128,freezeGifs:!1})),o.createElement(u.e,null,o.createElement(g.z,{miroId:B,alt:U||"",diameter:80,freezeGifs:!1}))),o.createElement(v.x,{paddingBottom:"20px"},o.createElement(y.F1,{scale:{xs:"S",sm:"S",md:"L",lg:"L",xl:"L"}},K)),o.createElement(v.x,{paddingBottom:"20px"},o.createElement(E.F,{scale:"L",color:"DARKER"},$)),o.createElement(v.x,{display:"flex",paddingBottom:"20px",flexDirection:{xs:r?"column-reverse":void 0,sm:r?"column-reverse":void 0,md:void 0,lg:void 0,xl:void 0},justifyContent:"center"},r&&o.createElement(v.x,{paddingRight:{xs:void 0,sm:void 0,md:"12px",lg:"12px",xl:"12px"},paddingTop:{xs:"12px",sm:"12px",md:void 0,lg:void 0,xl:void 0}},o.createElement(k.z,{href:z,buttonStyle:"OBVIOUS",size:"LARGE"},"Not now")),o.createElement(v.x,null,o.createElement(k.z,{onClick:j,href:G,buttonStyle:"STRONG",size:"LARGE"},"Become a member"))),!r&&!A&&o.createElement(E.F,{scale:"L",color:"DARKER",tag:"span"},o.createElement(h.r,{linkStyle:"SUBTLE",href:V},"Visit ",U,"'s profile")),L&&A&&o.createElement(E.F,{scale:"L",color:"ACCENT",tag:"span"},o.createElement(h.r,{linkStyle:"SUBTLE",href:(0,F.mEF)(_)},"Edit this message")))))))))},D=(0,a.Ps)(O(),_.$m,s.Kc,c.w,d.Mv,d.aU)},97171:(e,n,t)=>{"use strict";function i(e){if((e.match(/ /g)||[]).length>1)return"";var n=e.indexOf(" ");return e.substring(0,n)}function r(e){return e.google?"google":e.facebook?"facebook":e.twitter?"twitter":"medium"}t.d(n,{J:()=>i,S:()=>r})},22680:(e,n,t)=>{"use strict";t.d(n,{j7:()=>u,OO:()=>m,iI:()=>p});var i=t(28655),r=t.n(i),a=t(71439),o=t(97217),l=t(15085),d=t(42498);function c(){var e=r()(["\n  fragment shortformPostMetaDescription_post on Post {\n    id\n    metaDescription\n    seoDescription\n    shortformType\n    title\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=r()(["\n  fragment postMetaDescription_post on Post {\n    id\n    title\n    seoDescription\n    metaDescription\n    creator {\n      id\n      name\n    }\n    collection {\n      id\n      name\n    }\n    previewContent {\n      subtitle\n    }\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return s=function(){return e},e}var u=function(e){return function(e){var n=e.metaDescription,t=e.seoDescription,i=e.title||"";if(t)return t;if(n)return n;var r=function(e){var n=(0,l.r4)(e,250);return n&&(0,d.N8)(n,200)}(e);if(r.length>150)return r;var a=e.previewContent&&e.previewContent.subtitle||"";if(a.length>140)return a;a.length>0&&(a+=".");var o=(i.length?i+". ":"")+a;if(o.length>140)return o;var c="“".concat(i,"” is published");return e.creator&&e.creator.name&&(c+=" by ".concat(e.creator.name)),e.collection&&e.collection.name&&(c+=" in ".concat(e.collection.name)),"".concat(a," ").concat(c,".")}(e).trim()},m=function(e,n){var t=e.metaDescription,i=e.seoDescription,r=e.shortformType,a=r===o.po.SHORTFORM_TYPE_NOTE||!r;if(i)return i;if(t)return t;if(a&&n){var c=(0,l.r4)(e,350,0);return(0,d.N8)(c,300)}return""},p=(0,a.Ps)(s(),l.bh);(0,a.Ps)(c(),l.bh)},32934:(e,n,t)=>{"use strict";t.d(n,{bh:()=>a,dm:()=>c,bq:()=>s,Pz:()=>u,HF:()=>m});var i=t(319),r=t.n(i),a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"getPostContentAsString_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"mixtapeMetadata"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"href"}}]}}]}}]}}]}}]}}]},o=[{kind:"FragmentDefinition",name:{kind:"Name",value:"appendPostContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"sequence"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}],l=[{kind:"FragmentDefinition",name:{kind:"Name",value:"maybeAppendProductName_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}}]}}],d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"postTitle_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoTitle"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"appendPostContext_post"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"FragmentSpread",name:{kind:"Name",value:"maybeAppendProductName_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}}]}}].concat(r()(a.definitions),r()(o),r()(l))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"getTitleDetails_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"GetTitleIndexMap_bodyModel"}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}}]}}].concat(r()([{kind:"FragmentDefinition",name:{kind:"Name",value:"GetTitleIndexMap_bodyModel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RichText"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"text"}}]}}]}}]),r()(a.definitions))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"getTitleForPost_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"FragmentSpread",name:{kind:"Name",value:"postTitle_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleDetails_post"}}]}}].concat(r()(d.definitions),r()(c.definitions))},u={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"shortformPostTitle_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoTitle"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"appendPostContext_post"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"maybeAppendProductName_collection"}}]}}]}}].concat(r()(a.definitions),r()(o),r()(l))},m={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"shouldIndexPost_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"isLimitedState"}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"shortformType"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"curationStatus"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"atsQualifiedAt"}},{kind:"Field",name:{kind:"Name",value:"customDomainState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"live"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"isSubdomain"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"customDomainState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"live"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"isSubdomain"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"atsQualifiedAt"}}]}},{kind:"Field",name:{kind:"Name",value:"ptsQualifiedAt"}}]}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"Field",name:{kind:"Name",value:"isIndexable"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}}]}}].concat(r()(a.definitions))}},15085:(e,n,t)=>{"use strict";t.d(n,{r4:()=>I,bh:()=>F,yB:()=>_,lO:()=>T,Bg:()=>A,_t:()=>R,bq:()=>L,oS:()=>M,c_:()=>j});var i=t(59713),r=t.n(i),a=t(28655),o=t.n(a),l=t(71439),d=t(93022),c=t(61796),s=t(97217),u=t(44987),m=t(42498);function p(){var e=o()(["\n  fragment shouldIndexPost_post on Post {\n    id\n    firstPublishedAt\n    isLimitedState\n    isShortform\n    shortformType\n    visibility\n    curationStatus\n    creator {\n      name\n      atsQualifiedAt\n      customDomainState {\n        live {\n          status\n          isSubdomain\n        }\n      }\n    }\n    collection {\n      customDomainState {\n        live {\n          status\n          isSubdomain\n        }\n      }\n      creator {\n        atsQualifiedAt\n      }\n      ptsQualifiedAt\n    }\n    noIndex\n    isIndexable\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return p=function(){return e},e}function g(){var e=o()(["\n  fragment shortformPostTitle_post on Post {\n    id\n    title\n    seoTitle\n    ...getPostContentAsString_post\n    ...appendPostContext_post\n    collection {\n      ...maybeAppendProductName_collection\n    }\n  }\n  ","\n  ","\n  ","\n"]);return g=function(){return e},e}function v(){var e=o()(["\n  fragment getTitleForPost_post on Post {\n    id\n    title\n    ...postTitle_post\n    ...getTitleDetails_post\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){r()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function h(){var e=o()(["\n  fragment postTitle_post on Post {\n    id\n    title\n    seoTitle\n    firstPublishedAt\n    ...getPostContentAsString_post\n    ...appendPostContext_post\n    collection {\n      id\n      name\n      domain\n      ...maybeAppendProductName_collection\n    }\n    creator {\n      name\n    }\n    previewContent {\n      subtitle\n    }\n  }\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function S(){var e=o()(["\n  fragment maybeAppendProductName_collection on Collection {\n    id\n    domain\n  }\n"]);return S=function(){return e},e}function y(){var e=o()(["\n  fragment getTitleDetails_post on Post {\n    id\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        ...GetTitleIndexMap_bodyModel\n      }\n    }\n    ...getPostContentAsString_post\n  }\n  ","\n  ","\n"]);return y=function(){return e},e}function E(){var e=o()(["\n  fragment getPostContentAsString_post on Post {\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        paragraphs {\n          text\n          type\n          mixtapeMetadata {\n            href\n          }\n        }\n      }\n    }\n  }\n"]);return E=function(){return e},e}function b(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return x(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?x(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw a}}}}function x(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function w(){var e=o()(["\n  fragment appendPostContext_post on Post {\n    id\n    sequence {\n      title\n    }\n    collection {\n      name\n    }\n    creator {\n      name\n    }\n  }\n"]);return w=function(){return e},e}function N(e,n){var t,i,r;return null!==(t=n.sequence)&&void 0!==t&&t.title?e+=" - ".concat(n.sequence.title):null!==(i=n.collection)&&void 0!==i&&i.name?e+=" - ".concat(n.collection.name):null!==(r=n.creator)&&void 0!==r&&r.name&&(e+=" - ".concat(n.creator.name)),e}var P=(0,l.Ps)(w());function I(e){var n,t,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeMixtapeHref:!1},l=o.includeMixtapeHref,d=(null===(n=e.content)||void 0===n||null===(t=n.bodyModel)||void 0===t?void 0:t.paragraphs)||[],c="",s=b(d);try{for(s.s();!(i=s.n()).done;){var u=i.value,m=u.mixtapeMetadata,p=u.text,g=u.type;if(l&&null!=m&&m.href?c+=c?" ".concat(m.href):m.href:"P"===g&&p&&p.length>a&&(c+=c?" ".concat(p):p),c.length>r)break}}catch(e){s.e(e)}finally{s.f()}return c}var F=(0,l.Ps)(E());function _(e){var n=!1,t="";if(e.content&&e.content.bodyModel&&e.content.bodyModel.paragraphs){var i=e.content.bodyModel.paragraphs,r=(0,c.LI)(i).titleIndex;"number"==typeof r&&(t=i[r].text||"",n=!0)}return{hasTitleGraf:n,latestTitle:t}}var O=(0,l.Ps)(y(),F,c.k);function C(e,n,t){return null!=t&&t.domain?e:"".concat(e," - ").concat(n)}var D=(0,l.Ps)(S());function T(e,n){var t,i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.seoTitle,o=e.title||"",l=(null===(t=e.previewContent)||void 0===t?void 0:t.subtitle)||"";if(a)return(0,u.p)(a,e.collection&&e.collection.name,n);if(!r)return o.length>50?o:o=C(o=N(o,e),n,e.collection);o.length<33&&l&&(l=(0,m.N8)(l,40),o+=". ".concat(l)),null!==(i=e.creator)&&void 0!==i&&i.name&&(o+=" | by ".concat(e.creator.name));var c="",s=Date.now()-5184e6;e.firstPublishedAt>=s&&(c=" | ".concat((0,d.Z)(e.firstPublishedAt,"LLL, yyyy")));var p=e.collection;return p?p.domain?o+="".concat(c," | ").concat(p.name):o+=" | ".concat(p.name).concat(c," | ").concat(n):o+="".concat(c," | ").concat(n),o}var A=(0,l.Ps)(h(),F,P,D);function R(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_(e),i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.title||"",a=t.latestTitle||r,o=k(k({},e),{},{title:a});return T(o,n,i).trim()}var L=(0,l.Ps)(v(),A,O);function M(e,n,t){var i=e.seoTitle,r=e.title||"";return i?(0,u.p)(i,e.collection&&e.collection.name,n):r=C(r=N(r=function(e,n,t){var i=n.shortformType,r=i===s.po.SHORTFORM_TYPE_NOTE||!i;return t||(r?e=I(n,250,0):i===s.po.SHORTFORM_TYPE_LINK&&(e=I(n,250,0,{includeMixtapeHref:!0}))),(0,m.N8)(e,200)}(r,e,t),e),n,e.collection)}function j(e){var n,t,i,r,a=e.noIndex,o=e.collection,l=e.curationStatus,d=e.firstPublishedAt,c=e.isLimitedState,u=e.isShortform,m=e.shortformType,p=e.visibility,g=e.isIndexable,v=m===s.po.SHORTFORM_TYPE_NOTE||!m;if(a)return{shouldIndexPost:!1,indexReason:"noIndex is set"};if(!d)return{shouldIndexPost:!1,indexReason:"draft"};if("PUBLIC"!==p&&"LOCKED"!==p)return{shouldIndexPost:!1,indexReason:"unlisted (PUBLIC | LOCKED)"};if(c)return{shouldIndexPost:!1,indexReason:"limited state"};if(u)if(v){if(I(e,10,0).length<=10)return{shouldIndexPost:!1,indexReason:"insufficient content <=10 chars"}}else if(0===I(e,10,0).length)return{shouldIndexPost:!1,indexReason:"shortform with no commentary"};if(g&&d<16347744e5)return{shouldIndexPost:!0,indexReason:"english, has spam score < 0.5 & published before 10/21/2021"};if((null===(n=e.creator)||void 0===n?void 0:n.atsQualifiedAt)>0||o&&o.ptsQualifiedAt>0)return{shouldIndexPost:!0,indexReason:"author or pub is high-quality"};if(l&&(l===s.Xg.CURATION_STATUS_DISTRIBUTED||l===s.Xg.CURATION_STATUS_DISTRIBUTED_AND_DISABLED))return{shouldIndexPost:!0,indexReason:"curated post"};var f=["DELETED","FAILED","UNSPECIFIED"],k=null==o||null===(t=o.customDomainState)||void 0===t?void 0:t.live,h=null===(i=e.creator)||void 0===i||null===(r=i.customDomainState)||void 0===r?void 0:r.live;return k&&!k.isSubdomain&&!f.includes(k.status)||h&&!h.isSubdomain&&!f.includes(h.status)?{shouldIndexPost:!0,indexReason:"custom domain user or pub"}:{shouldIndexPost:!1,indexReason:"no matching rule"}}(0,l.Ps)(g(),F,P,D),(0,l.Ps)(p(),F)},44987:(e,n,t)=>{"use strict";t.d(n,{N:()=>i,p:()=>r});var i=function(e){return e||"Untitled story"},r=function(e,n,t){return n?"".concat(e," | ").concat(n):t?"".concat(e," | ").concat(t):e}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/71263.400fdb86.chunk.js.map